
<!doctype html><html><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Billboard Sentinel Dashboard (Complete)</title><link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/><style>html,body,#map{height:100%;margin:0} .panel{position:absolute;left:8px;top:8px;background:white;padding:8px;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,.12)}</style></head><body><div id="map"></div><div class="panel"><button id="refresh">Refresh</button><button id="seed">Seed Registry</button></div><script src="https://unpkg.com/leaflet/dist/leaflet.js"></script><script>const map=L.map('map').setView([30.354,76.366],13);L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{maxZoom:19}).addTo(map);const markers=L.layerGroup().addTo(map);async function load(){const r=await fetch('/api/heatmap');const data=await r.json();markers.clearLayers();data.features.forEach(f=>{const [lon,lat]=f.geometry.coordinates; const m=L.circleMarker([lat,lon],{radius:6}).addTo(markers); m.on('click',()=>show(f.properties.id))});}async function show(id){const r=await fetch('/api/reports/'+id);const json=await r.json(); alert('Report '+json.id+'\nDetections: '+json.detections.length);}document.getElementById('refresh').onclick=load;document.getElementById('seed').onclick=()=>fetch('/api/registry/seed',{method:'POST'}).then(()=>alert('seeded'));load();</script></body></html>
